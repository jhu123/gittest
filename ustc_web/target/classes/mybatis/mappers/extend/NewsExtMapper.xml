<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.test.mapper.extend.NewsExtMapper">
    <resultMap id="BaseResultMap" type="cn.test.model.News" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Apr 08 11:20:18 CST 2016.
        -->
        <constructor >
            <idArg column="NEWS_ID" jdbcType="DECIMAL" javaType="java.lang.Long" />
            <arg column="TITLE" jdbcType="VARCHAR" javaType="java.lang.String" />
            <arg column="PIC_PATH" jdbcType="VARCHAR" javaType="java.lang.String" />
            <arg column="NEWS_TYPE" jdbcType="DECIMAL" javaType="java.lang.Short" />
            <arg column="STATE" jdbcType="DECIMAL" javaType="java.lang.Short" />
            <arg column="CREATE_TIME" jdbcType="DATE" javaType="java.util.Date" />
            <arg column="CREATE_USER_NAME" jdbcType="VARCHAR" javaType="java.lang.String" />
            <arg column="CREATE_USER_ID" jdbcType="DECIMAL" javaType="java.lang.Long" />
        </constructor>
    </resultMap>
    <resultMap id="ResultMapWithBLOBs" type="cn.test.model.News" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Apr 08 11:20:18 CST 2016.
        -->
        <constructor >
            <idArg column="NEWS_ID" jdbcType="DECIMAL" javaType="java.lang.Long" />
            <arg column="TITLE" jdbcType="VARCHAR" javaType="java.lang.String" />
            <arg column="PIC_PATH" jdbcType="VARCHAR" javaType="java.lang.String" />
            <arg column="NEWS_TYPE" jdbcType="DECIMAL" javaType="java.lang.Short" />
            <arg column="STATE" jdbcType="DECIMAL" javaType="java.lang.Short" />
            <arg column="CREATE_TIME" jdbcType="DATE" javaType="java.util.Date" />
            <arg column="CREATE_USER_NAME" jdbcType="VARCHAR" javaType="java.lang.String" />
            <arg column="CREATE_USER_ID" jdbcType="DECIMAL" javaType="java.lang.Long" />
            <arg column="NEWS_CONTENT" jdbcType="CLOB" javaType="java.lang.String" />
        </constructor>
    </resultMap>
    <sql id="Base_Column_List" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Apr 08 11:20:18 CST 2016.
        -->
        NEWS_ID, TITLE, PIC_PATH, NEWS_TYPE, STATE, CREATE_TIME, CREATE_USER_NAME, CREATE_USER_ID
    </sql>
    <sql id="Blob_Column_List" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Apr 08 11:20:18 CST 2016.
        -->
        NEWS_CONTENT
    </sql>
    <select id="findAll" resultMap="ResultMapWithBLOBs">
        select
        <include refid="Base_Column_List" />
        ,
        <include refid="Blob_Column_List" />
         from biz_news where state=1 and 10>=rowNum order by create_time desc
    </select>
    <select id="findAllPage" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Integer">
        select *
        from
        (select b.*,rownum rn from
        (select
        <include refid="Base_Column_List"/>,
        <include
                refid="Blob_Column_List"/>from biz_news where state=1 order by create_time desc)b
        )c
        where c.rn > #{rowNum,jdbcType=INTEGER}
        and (#{rowNum,jdbcType=INTEGER}+5)>c.rn

    </select>
</mapper>